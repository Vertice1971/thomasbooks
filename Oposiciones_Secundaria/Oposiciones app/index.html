<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Examen de Especialidad - Oposiciones Profesorado Secundaria</title>
  <link rel="stylesheet" href="styles.css">

  <style>
    /* Portada inicial */
    #cover{
      position:fixed;
      inset:0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display:flex;
      justify-content:center;
      align-items:center;
      z-index:9999;
    }

    #cover img{
      max-width:100%;
      max-height:100%;
      border-radius:12px;
      box-shadow:0 20px 40px rgba(0,0,0,0.3);
    }

    /* Fondo semitransparente permanente */
    #bgOverlay{
      position:fixed;
      inset:0;
      background:url("Portada.png") no-repeat center center;
      background-size:contain;
      opacity:.15;
      z-index:1;
      pointer-events:none;
    }

    .container{
      position:relative;
      z-index:2;
    }

    /* Ventana explicativa */
    #introModal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.65);
      display:none;
      justify-content:center;
      align-items:center;
      z-index:9998;
    }

    #introBox{
      background:white;
      padding:30px;
      max-width:600px;
      border-radius:12px;
      box-shadow:0 20px 50px rgba(0,0,0,0.4);
      text-align:left;
    }

    #introBox h2{
      margin-top:0;
    }

    #introBox button{
      margin-top:20px;
      padding:8px 18px;
      cursor:pointer;
    }
  </style>
</head>

<body>

  <!-- Portada inicial -->
  <div id="cover">
    <img src="Portada.png" alt="Portada">
  </div>

  <!-- Modal explicación -->
  <div id="introModal">
    <div id="introBox">
      <h2>¿Qué es este simulador?</h2>
      <p>
        Este programa muestra el funcionamiento real del escenario del examen de oposición.
        Tienes una pequeña calculadora de probabilidades además.
        Primero eliges especialidad y tipo de sorteo (temario completo o solo una parte)
        El sistema genera los números como en un tribunal oficial. 
        Después puedes seleccionar un tema para ir practicando tu repaso del tema con temporizador.
        Este programa no controla los contenidos, solo te presenta el escenario de tu examen.
      </p>
      <button onclick="cerrarIntro()">Entendido</button>
    </div>
  </div>

  <!-- Fondo permanente -->
  <div id="bgOverlay"></div>

  <div class="container" id="contenedor-principal">

    <h2>Simulador de Examen de Especialidad - Oposiciones Profesorado Secundaria</h2>

    <p style="font-size:0.8em; margin-top:-1em;">
      <a href="https://www.amazon.es/dp/B0GP6QM85J" target="_blank">
        Enlace al Manual para el diseño de la programación didáctica
      </a>
    </p>

    <p style="font-size:0.8em; margin-top:-0.5em;">
      <a href="https://vertice1971.github.io/thomasbooks/Oposiciones_Secundaria/Men%C3%BA.html" target="_blank">
        Enlace al Menú de Programas Gratuitos
      </a>
    </p>

    <p style="font-size:0.8em; color:#666; margin-top:-1em;">
      tomcue@iesjuandelacierva.com
    </p>

    <p id="parte-1" style="font-size:medium; margin:1em 0;">
      <strong>Parte 1</strong>
    </p>

    <button id="btn-parte-2" class="boton-naranja">
      Pasar a Parte 2
    </button>

    <form id="especialidad-form">

      <label for="especialidad">Selecciona una especialidad:</label>
      <select id="especialidad" required>
        <option value="">-- Elegir --</option>
      </select>

      <label for="modo">Selecciona el tipo de sorteo:</label>
      <select id="modo" required>
        <option value="">-- Elegir --</option>
        <option value="completo">Temario completo</option>
        <option value="intermedia">Preparación intermedia</option>
      </select>

      <div id="intermedia-opciones" style="display:none;">
        <label for="cantidad">Número de temas a extraer:</label>
        <input type="number" id="cantidad" min="1" max="71">

        <label for="rango">
          Lista de temas disponibles (comas e intervalos con guiones):
        </label>
        <input type="text" id="rango"
               placeholder="Ej: 1,2,3,6,7-12,17,19,20-40">
      </div>

      <button type="submit">
        Generar números
      </button>

    </form>

    <div id="resultado" class="result" style="display:none;"></div>

    <button id="btn-continuar"
            class="boton-rojo"
            style="display:none; margin-top:1em;">
      Pasa a Seleccionar Tema
    </button>

    <div id="contenedor-prueba-a" style="margin-top:2em;"></div>

  </div>

  <script src="temas.js"></script>
  <script src="script.js"></script>
  <script src="temporizador-parte1.js"></script>
  <script src="Prueba-A.js"></script>
  <script src="Prueba-B.js"></script>
  <script src="probabilidades.js"></script>

  <script>
    function cerrarIntro(){
      document.getElementById("introModal").style.display = "none";
    }

    function mostrarIntroSiPrimeraVez(){
      if(!sessionStorage.getItem("introSimulador")){
        document.getElementById("introModal").style.display = "flex";
        sessionStorage.setItem("introSimulador","si");
      }
    }

    window.addEventListener('load', function () {
      setTimeout(function () {
        var cover = document.getElementById('cover');
        if (cover) cover.style.display = 'none';
        mostrarIntroSiPrimeraVez();
      }, 3000);
    });
  </script>

</body>
</html>